<ion-header>
	<ion-toolbar>
		<ion-title>Thông tin xuất hóa đơn</ion-title>
		<ion-buttons slot="primary">
			<ion-button title="{{'Close' | translate}}" color="primary" (click)="reset()">
				<ion-icon slot="icon-only" name="refresh-outline"></ion-icon>
			</ion-button>
			<ion-button title="{{'Close' | translate}}" color="secondary" (click)="Apply()">
				<ion-icon slot="icon-only" name="close"></ion-icon>
			</ion-button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>
<ion-content appScrollbarTheme>
	<div id="ng-select" style="position: absolute; z-index: 30005"></div>

	<div class="ion-padding">
		<form [formGroup]="taxInfoGroup">
			<ion-grid fixed>
				<ion-row>
					<!-- <ion-radio-group [value]="optionalTax" (ionChange)="hasTaxChange($event)">
							<ion-col size="6">
								<ion-radio value="hasTax" labelPlacement="end" aria-label="Has tax identification number"
									>{{'Has tax identification number' | translate}}</ion-radio
								>
							</ion-col>
							<ion-col size="6">
								<ion-radio value="noTax" labelPlacement="end" aria-label="No tax identification number">{{'No tax identification number' | translate}}</ion-radio>
							</ion-col>
						</ion-radio-group> -->

					<ion-col size="12" size-sm="12" size-md="12" size-xl="12">
						<app-form-control
							*ngIf="!_isDefaultBP"
							[field]="{id:'_OptionCode', label:'Invoice required', type:'ng-select',dataSource:TaxCodeDataSource, bindLabel:'CompanyName' ,bindValue:'Id',form:formGroup , appendTo: '#ng-select'}"
							(change)="changeSelectTaxCode($event)"
						>
							<ng-template input-control-template ng-label-tmp let-i="item">
								<span *ngIf="i.CompanyName">{{i.CompanyName}}</span>
								<span *ngIf="!i.CompanyName">{{i.Name}}</span>
							</ng-template>
							<ng-template input-control-template ng-option-tmp let-i="item" let-search="searchTerm">
								<div *ngIf="i">
									<span *ngIf="i.CompanyName">{{i.CompanyName}}</span>
									<span *ngIf="!i.CompanyName">{{i.Name}}</span>
								</div>
							</ng-template>
						</app-form-control>
					</ion-col>

					<ion-col *ngIf="_isDefaultBP" size="12" size-sm="12" size-md="12" size-xl="12">
						<ion-list-header class="ion-no-padding">
							<ion-label color="primary">{{'Customer information' | translate}}</ion-label>
						</ion-list-header>

						<app-form-control [field]="{id:'Name', label:'Customer', type:'text',form:formGroup}"></app-form-control>

						<app-form-control [field]="{id:'WorkPhone', label:'Work phone', type:'text',form:formGroup}"></app-form-control>
					</ion-col>
					<ion-col size="12" size-sm size-xl="12">
						<ion-list-header *ngIf="isShowInfo || _isDefaultBP" class="ion-no-padding">
							<ion-label color="primary">{{'Invoice information' | translate}}</ion-label>
						</ion-list-header>
						<ion-radio-group *ngIf="_isDefaultBP || formGroup.controls._OptionCode.value =='AddNew'" [value]="optionalTax" (ionChange)="hasTaxChange($event)">
							<ion-col size="6">
								<ion-radio value="hasTax" labelPlacement="end" aria-label="Has tax identification number"
									>{{'Has tax identification number' | translate}}</ion-radio
								>
							</ion-col>
							<ion-col size="6">
								<ion-radio value="noTax" labelPlacement="end" aria-label="No tax identification number">{{'No tax identification number' | translate}}</ion-radio>
							</ion-col>
						</ion-radio-group>
						<ng-container *ngIf="isShowInfo || _isDefaultBP">
							<app-form-control
								*ngIf="optionalTax == 'hasTax'"
								[field]="{id:'TaxCode', label:'Tax code', type:'text',form:taxInfoGroup}"
								(change)="changeTaxCode($event)"
							></app-form-control>

							<app-form-control
								*ngIf="optionalTax == 'noTax'"
								[field]="{id:'Name', label:'Personal / organization name', type:'text',form:taxInfoGroup}"
							></app-form-control>

							<app-form-control *ngIf="optionalTax == 'hasTax'" [field]="{id:'CompanyName', label:'Company name', type:'text',form:taxInfoGroup}"></app-form-control>

							<app-form-control [field]="{id:'BillingAddress', label:'Address', type:'text',form:taxInfoGroup}"></app-form-control>
							<app-form-control
								*ngIf="optionalTax == 'noTax'"
								[field]="{id:'IdentityCardNumber', label:'Identity card number', type:'text',form:taxInfoGroup}"
							></app-form-control>

							<app-form-control [field]="{id:'Email', label:'Email', type:'text',form:taxInfoGroup}"></app-form-control>
							<app-form-control
								*ngIf="isShowInfo || _isDefaultBP"
								[field]="{id:'IsDefault', label:'Default tax info', type:'checkbox',form:taxInfoGroup}"
							></app-form-control>
						</ng-container>
					</ion-col>
				</ion-row>
			</ion-grid>
		</form>
	</div>
</ion-content>

<ion-footer>
	<div class="ion-padding">
		<ion-button size="small" [disabled]="!_canAddEInvoiceInfo" expand="block" (click)="Apply(true)">{{'Áp dụng' | translate}}</ion-button>
	</div>
</ion-footer>
