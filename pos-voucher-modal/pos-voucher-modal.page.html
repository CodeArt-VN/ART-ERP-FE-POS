<ion-header>
	<ion-toolbar>
		<ion-title>Voucher</ion-title>
		<ion-buttons slot="primary">
			<ion-button title="{{'Close' | translate}}" color="secondary" (click)="closeModal()">
				<ion-icon slot="icon-only" name="close"></ion-icon>
			</ion-button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>
<ion-content appScrollbarTheme class="ion-padding">
	<div id="pos-discount-page" style="position: absolute"></div>
	<div class="main-view">
		<ion-grid fixed style="max-width: 500px" *ngIf="SaleOrder">
			<ion-row>
				<ion-col>
					<div class="c-control">
						<input (change)="changeCode()" class="c-input c-label" [(ngModel)]="Code" type="text" placeholder="Nhập mã voucher" />
					</div>
				</ion-col>
			</ion-row>

			<ion-row *ngIf="Voucher" class="hr-group-voucher" [class.first]="true">
				<div class="group-label">{{'Result' | translate}}</div>
				<ion-col size="12">
					<div class="coupon" [class.coupon-disabled]="!Voucher.CanUse">
						<div class="coupon-left">
							<ion-icon size="large" name="ticket-outline"></ion-icon>
						</div>

						<div class="coupon-right">
							<span>{{Voucher.Program.Name}}</span>
							<span *ngIf="!Voucher.Program.IsByPercent">{{'Reduce' | translate}} {{Voucher.Program.Value | number: '1.0-0'}}</span>
							<span *ngIf="Voucher.Program.IsByPercent" >{{'Reduce' | translate}} {{Voucher.Program.PerCentValue }}% <span *ngIf="Voucher.Program.MaxValue > 0">{{'Max' | translate}} {{Voucher.Program.MaxValue | number: '1.0-0'}} </span></span>

							<small *ngIf="Voucher.Program.MinOrderValue">
								{{'For orders from' | translate}} {{Voucher.Program.MinOrderValue | number: '1.0-0'}}
								<span *ngIf="Voucher.Program.MaxValue"> - {{'Maximum'| translate}} {{Voucher.Program.MaxValue | number: '1.0-0'}}</span>
							</small>
							<small *ngIf="Voucher.Program.ToDate">{{'Expiry' | translate}}: {{Voucher.Program.ToDate | date: 'dd/MM/yyyy'}}</small>
						</div>
						<ion-button class="apply-btn" expand="block" size="small" [disabled]="!Voucher.CanUse" slot="end" (click)="applyVoucher(Voucher)">{{'Áp dụng' | translate}}</ion-button>
					</div>
				</ion-col>
			</ion-row>

			<ion-row class="hr-group-voucher" [class.first]="!Voucher">
				<div class="group-label">{{'Promo' | translate}}</div>
				<ion-col size="12" *ngFor="let i of items; let j = index;">
					<div class="coupon" [class.coupon-disabled]="!i.CanUse">
						<div class="coupon-left">
							<ion-icon size="large" name="ticket-outline"></ion-icon>
						</div>

						<div class="coupon-right">
							<span>{{i.Program.Name}}</span>
							<span *ngIf="!i.Program.IsByPercent">{{'Reduce' | translate}} {{i.Program.Value | number: '1.0-0'}}</span>
							<span *ngIf="i.Program.IsByPercent" >{{'Reduce' | translate}} {{i.Program.PerCentValue }}% <span *ngIf="i.Program.MaxValue > 0">{{'Max' | translate}} {{i.Program.MaxValue | number: '1.0-0'}} </span></span>

							<small *ngIf="i.Program.MinOrderValue">
								{{'For orders from' | translate}} {{i.Program.MinOrderValue | number: '1.0-0'}}
								<span *ngIf="i.Program.MaxValue"> - {{'Maximum'| translate}} {{i.Program.MaxValue | number: '1.0-0'}}</span>
							</small>
							<small *ngIf="i.Program.ToDate">{{'Expiry' | translate}}: {{i.Program.ToDate | date: 'dd/MM/yyyy'}}</small>
						</div>
						<ion-button class="apply-btn" expand="block" size="small" [disabled]="!i.CanUse" slot="end" (click)="applyVoucher(i)">{{'Áp dụng' | translate}}</ion-button>
					</div>
				</ion-col>
			</ion-row>
		</ion-grid>
	</div>
</ion-content>
